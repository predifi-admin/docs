---
title: "Orderbook API"
description: "Access real-time orderbook depth and liquidity"
---

## Overview

Get orderbook data:
- **Full depth** - All bid/ask levels with sizes
- **Cross-venue aggregation** - Combined liquidity
- **Best bid/ask** - Top of book prices
- **Liquidity analysis** - Available liquidity at each level

<Info>
  Orderbooks aggregated across all venues by default.
</Info>

---

## Get Orderbook Depth

<ParamField path="GET" type="method">
  /v1/orderbook/:venue/:id
</ParamField>

### Parameters

<ParamField path="venue" type="string" required>
  `aggregated`, `polymarket`, `predifi_clob`, `limitless`
</ParamField>

<ParamField path="id" type="string" required>
  Market identifier
</ParamField>

<ParamField query="outcomeId" type="number">
  `0` = YES, `1` = NO (omit for both)
</ParamField>

<ParamField query="depth" type="number">
  Price levels to return (default: 20, max: 100)
</ParamField>

### Response

```json
{
  "ok": true,
  "data": {
    "marketId": "BTC-15M-20250111-1430",
    "venue": "aggregated",
    "timestamp": 1638360000000,
    "outcomes": {
      "YES": {
        "outcomeId": 0,
        "bids": [
          {
            "price": 0.6600,
            "size": 1500.50,
            "total": 990.33,
            "orders": 12,
            "venues": {
              "polymarket": 890.30,
              "predifi_clob": 610.20
            }
          }
        ],
        "asks": [
          {
            "price": 0.6650,
            "size": 1200.00,
            "total": 798.00,
            "orders": 8,
            "venues": {
              "polymarket": 700.00,
              "predifi_clob": 500.00
            }
          }
        ],
        "spread": 0.0050,
        "spreadPercent": 0.76,
        "midPrice": 0.6625,
        "bestBid": 0.6600,
        "bestAsk": 0.6650,
        "totalBidLiquidity": 45678.90,
        "totalAskLiquidity": 52341.23
      }
    }
  }
}
```

<ResponseField name="bids" type="array">
  Buy orders in descending price order
</ResponseField>

<ResponseField name="asks" type="array">
  Sell orders in ascending price order
</ResponseField>

<ResponseField name="spread" type="number">
  Bid-ask spread: `bestAsk - bestBid`
</ResponseField>

<ResponseField name="midPrice" type="number">
  Mid price: `(bestBid + bestAsk) / 2`
</ResponseField>

### Example

<CodeGroup>

```bash cURL
curl "https://api.predifi.com/v1/orderbook/aggregated/BTC-15M-20250111-1430?outcomeId=0&depth=10" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```typescript TypeScript
const ob = await api.get('/v1/orderbook/aggregated/BTC-15M-20250111-1430', {
  params: { outcomeId: 0, depth: 10 }
});

const yes = ob.data.outcomes.YES;
console.log(`Mid: $${yes.midPrice} | Spread: ${yes.spreadPercent.toFixed(2)}%`);
console.log(`Best Bid: $${yes.bestBid} | Best Ask: $${yes.bestAsk}`);
```

```python Python
response = requests.get(
    'https://api.predifi.com/v1/orderbook/aggregated/BTC-15M-20250111-1430',
    headers={'Authorization': f'Bearer {api_key}'},
    params={'outcomeId': 0, 'depth': 10}
)

yes = response.json()['data']['outcomes']['YES']
print(f"Mid: ${yes['midPrice']}, Spread: {yes['spreadPercent']:.2f}%")
```

</CodeGroup>

---

## Get Top of Book

Get best bid/ask only (faster, less data).

<ParamField path="GET" type="method">
  /v1/orderbook/:venue/:id/top
</ParamField>

### Response

```json
{
  "ok": true,
  "data": {
    "marketId": "BTC-15M-20250111-1430",
    "venue": "aggregated",
    "timestamp": 1638360000000,
    "outcomes": {
      "YES": {
        "outcomeId": 0,
        "bestBid": {"price": 0.6600, "size": 1500.50, "total": 990.33},
        "bestAsk": {"price": 0.6650, "size": 1200.00, "total": 798.00},
        "midPrice": 0.6625,
        "spread": 0.0050,
        "spreadPercent": 0.76
      }
    }
  }
}
```

### Example

<CodeGroup>

```typescript TypeScript
const top = await api.get('/v1/orderbook/aggregated/BTC-15M-20250111-1430/top');

const yes = top.data.outcomes.YES;
console.log(`Bid: $${yes.bestBid.price} | Ask: $${yes.bestAsk.price}`);
```

```python Python
response = requests.get(
    'https://api.predifi.com/v1/orderbook/aggregated/BTC-15M-20250111-1430/top',
    headers={'Authorization': f'Bearer {api_key}'}
)

for outcome, prices in response.json()['data']['outcomes'].items():
    print(f"{outcome}: Bid ${prices['bestBid']['price']}, Ask ${prices['bestAsk']['price']}")
```

</CodeGroup>

---

## Calculate Slippage

Estimate slippage for trade size:

```typescript
async function estimateSlippage(marketId: string, side: 'buy' | 'sell', size: number) {
  const ob = await api.get(`/v1/orderbook/aggregated/${marketId}`, {
    params: { outcomeId: 0, depth: 50 }
  });
  
  const yes = ob.data.outcomes.YES;
  const orders = side === 'buy' ? yes.asks : yes.bids;
  
  let remaining = size;
  let totalCost = 0;
  let sharesAcquired = 0;
  
  for (const level of orders) {
    if (remaining <= 0) break;
    const sharesToTake = Math.min(remaining, level.size);
    totalCost += sharesToTake * level.price;
    sharesAcquired += sharesToTake;
    remaining -= sharesToTake;
  }
  
  if (remaining > 0) {
    console.warn('Insufficient liquidity');
  }
  
  const avgPrice = totalCost / sharesAcquired;
  const marketPrice = side === 'buy' ? yes.bestAsk : yes.bestBid;
  const slippage = (avgPrice - marketPrice) / marketPrice;
  
  return {
    avgPrice,
    slippage,
    slippagePercent: slippage * 100,
    totalCost,
    sharesAcquired
  };
}
```

---

## Understanding Orderbooks

### Bid-Ask Spread

```
Best Bid: $0.6600 (buyers willing to pay)
Best Ask: $0.6650 (sellers willing to accept)
Spread:   $0.0050 (0.76%)
```

**Tighter spreads** = more liquid, lower trading costs  
**Wider spreads** = less liquid, higher trading costs

### Market vs Limit Orders

**Market Order**:
- Executes immediately at best available price
- May have slippage if order walks the book
- Guaranteed execution

**Limit Order**:
- Only executes at specified price or better
- May not execute if price not reached
- Guaranteed price

---

## Best Practices

<AccordionGroup>
  <Accordion title="Use Aggregated Orderbooks" icon="layer-group">
    Always use `venue=aggregated` to see total liquidity across all venues.
  </Accordion>

  <Accordion title="Check Spread Before Trading" icon="arrows-left-right">
    Wide spreads (>5%) indicate low liquidity. Consider smaller size or limit order.
  </Accordion>

  <Accordion title="Estimate Slippage for Large Orders" icon="chart-line">
    For trades >$1000, calculate slippage first to avoid surprises.
  </Accordion>

  <Accordion title="Use WebSocket for Real-Time" icon="bolt">
    Subscribe to `orderbook` channel instead of polling REST endpoint.
  </Accordion>
</AccordionGroup>

---

## Error Handling

| Error Code | Description |
|------------|-------------|
| `MARKET_NOT_FOUND` | Market doesn't exist |
| `INVALID_VENUE` | Unknown venue identifier |
| `INVALID_OUTCOME` | Invalid outcomeId |
| `ORDERBOOK_EMPTY` | No orders in orderbook |
| `VENUE_UNAVAILABLE` | Venue temporarily unavailable |

---

## Rate Limits

| Endpoint | Rate Limit |
|----------|------------|
| `GET /v1/orderbook/:venue/:id` | 60 req/min |
| `GET /v1/orderbook/:venue/:id/top` | 100 req/min |

<Tip>
  Use WebSocket API for real-time orderbook updates instead of polling.
</Tip>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Trading API" icon="cart-shopping" href="/api-reference/trading">
    Execute trades based on orderbook
  </Card>
  <Card title="WebSocket API" icon="bolt" href="/api-reference/websockets">
    Real-time orderbook updates
  </Card>
  <Card title="Markets API" icon="chart-line" href="/api-reference/markets">
    Browse available markets
  </Card>
  <Card title="Portfolio API" icon="wallet" href="/api-reference/portfolio">
    Track your positions
  </Card>
</CardGroup>

