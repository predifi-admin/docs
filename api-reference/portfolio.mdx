---
title: "Portfolio API"
description: "Track balances, positions, P&L, and trade history across all chains and venues"
---

## Overview

Portfolio tracking provides:
- **Multi-chain balances** - USDC across Arbitrum, Base, Optimism, BSC
- **Positions** - Open/closed positions with P&L
- **P&L summary** - Performance metrics and breakdowns
- **Trade history** - Complete transaction log with settlements

<Info>
  All data aggregated across chains and venues automatically.
</Info>

---

## Get User Balances

Get USDC balances across all chains.

<ParamField path="GET" type="method">
  /v1/portfolio/:address/balances
</ParamField>

### Response

```json
{
  "ok": true,
  "data": {
    "address": "0x your_address",
    "totalUSDC": 12345.67,
    "totalPositionValue": 8901.23,
    "totalValue": 21246.90,
    "chains": {
      "arbitrum": {
        "balance": 5000.00,
        "positionValue": 3500.00,
        "total": 8500.00
      },
      "base": {
        "balance": 7345.67,
        "positionValue": 5401.23,
        "total": 12746.90
      }
    },
    "breakdown": {
      "availableUSDC": 12345.67,
      "activePositions": 8901.23,
      "lpVaults": 0.00,
      "pendingSettlements": 0.00
    }
  }
}
```

<ResponseField name="totalUSDC" type="number">
  Available USDC balance across all chains
</ResponseField>

<ResponseField name="totalPositionValue" type="number">
  Current value of all open positions
</ResponseField>

<ResponseField name="chains" type="object">
  Per-chain breakdown of balances and positions
</ResponseField>

### Example

<CodeGroup>

```bash cURL
curl "https://api.predifi.com/v1/portfolio/0x your_address/balances" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```typescript TypeScript
const balances = await api.get('/v1/portfolio/0x your_address/balances');
console.log(`Total: $${balances.data.totalValue}`);
console.log(`Available: $${balances.data.totalUSDC}`);
console.log(`In positions: $${balances.data.totalPositionValue}`);
```

```python Python
response = requests.get(
    'https://api.predifi.com/v1/portfolio/0x your_address/balances',
    headers={'Authorization': f'Bearer {api_key}'}
)
print(f"Total: ${response.json()['data']['totalValue']}")
```

</CodeGroup>

---

## Get User Positions

Get all open or closed positions.

<ParamField path="GET" type="method">
  /v1/portfolio/:address/positions
</ParamField>

### Parameters

<ParamField query="status" type="string">
  Filter: `open`, `closed`, or omit for all
</ParamField>

<ParamField query="market" type="string">
  Filter by market ID
</ParamField>

<ParamField query="category" type="string">
  Filter by category (crypto, sports, politics, etc.)
</ParamField>

### Response

```json
{
  "ok": true,
  "data": [
    {
      "positionId": "pos_123",
      "marketId": "BTC-15M-20250111-1430",
      "question": "Will BTC be above $100K?",
      "outcome": "YES",
      "outcomeId": 0,
      "shares": 150.0,
      "avgEntryPrice": 0.6543,
      "currentPrice": 0.6789,
      "entryValue": 98.15,
      "currentValue": 101.84,
      "pnl": 3.69,
      "pnlPercent": 3.76,
      "venue": "polymarket",
      "chain": "polygon",
      "status": "open",
      "openedAt": 1638360000000,
      "closedAt": null
    }
  ]
}
```

<ResponseField name="shares" type="number">
  Number of outcome shares held
</ResponseField>

<ResponseField name="avgEntryPrice" type="number">
  Average price paid per share (0-1)
</ResponseField>

<ResponseField name="pnl" type="number">
  Profit/loss in USDC (unrealized for open positions)
</ResponseField>

### Example

<CodeGroup>

```typescript TypeScript
// Get all open positions
const positions = await api.get('/v1/portfolio/0x your_address/positions', {
  params: { status: 'open' }
});

console.log(`Open positions: ${positions.data.length}`);

positions.data.forEach(pos => {
  console.log(`${pos.question}: ${pos.outcome}`);
  console.log(`  Shares: ${pos.shares} @ $${pos.avgEntryPrice}`);
  console.log(`  P&L: $${pos.pnl} (${pos.pnlPercent.toFixed(2)}%)`);
});
```

```python Python
response = requests.get(
    'https://api.predifi.com/v1/portfolio/0x your_address/positions',
    headers={'Authorization': f'Bearer {api_key}'},
    params={'status': 'open'}
)

for pos in response.json()['data']:
    print(f"{pos['question']}: {pos['outcome']}")
    print(f"  P&L: ${pos['pnl']} ({pos['pnlPercent']:.2f}%)")
```

</CodeGroup>

---

## Get P&L Summary

Get profit/loss summary and performance metrics.

<ParamField path="GET" type="method">
  /v1/portfolio/:address/pnl
</ParamField>

### Parameters

<ParamField query="period" type="string">
  Time period: `24h`, `7d`, `30d`, `all` (default: `all`)
</ParamField>

### Response

```json
{
  "ok": true,
  "data": {
    "period": "all",
    "summary": {
      "totalPnL": 1234.56,
      "realizedPnL": 890.12,
      "unrealizedPnL": 344.44,
      "roi": 15.43,
      "winRate": 0.65,
      "avgWin": 125.30,
      "avgLoss": -78.45,
      "bestTrade": 456.78,
      "worstTrade": -234.12,
      "totalTrades": 89,
      "winningTrades": 58,
      "losingTrades": 31
    },
    "byCategory": {
      "crypto": { "pnl": 789.01, "trades": 45 },
      "sports": { "pnl": 345.55, "trades": 32 },
      "politics": { "pnl": 100.00, "trades": 12 }
    },
    "byVenue": {
      "polymarket": { "pnl": 678.90, "trades": 54 },
      "predifi_clob": { "pnl": 555.66, "trades": 35 }
    },
    "timeline": [
      { "date": "2024-01-01", "pnl": 123.45, "cumulativePnL": 123.45 },
      { "date": "2024-01-02", "pnl": 67.89, "cumulativePnL": 191.34 }
    ]
  }
}
```

<ResponseField name="totalPnL" type="number">
  Total P&L (realized + unrealized)
</ResponseField>

<ResponseField name="winRate" type="number">
  Percentage of winning trades (0-1)
</ResponseField>

<ResponseField name="byCategory" type="object">
  P&L breakdown by market category
</ResponseField>

### Example

<CodeGroup>

```typescript TypeScript
const pnl = await api.get('/v1/portfolio/0x your_address/pnl', {
  params: { period: '30d' }
});

const { summary } = pnl.data;
console.log(`Total P&L: $${summary.totalPnL}`);
console.log(`Win rate: ${(summary.winRate * 100).toFixed(1)}%`);
console.log(`ROI: ${summary.roi.toFixed(2)}%`);
```

```python Python
response = requests.get(
    'https://api.predifi.com/v1/portfolio/0x your_address/pnl',
    headers={'Authorization': f'Bearer {api_key}'},
    params={'period': '30d'}
)

summary = response.json()['data']['summary']
print(f"Total P&L: ${summary['totalPnL']}")
print(f"Win rate: {summary['winRate'] * 100:.1f}%")
```

</CodeGroup>

---

## Get Trade History

Get complete trade history with settlements.

<ParamField path="GET" type="method">
  /v1/portfolio/:address/history
</ParamField>

### Parameters

<ParamField query="market" type="string">
  Filter by market ID
</ParamField>

<ParamField query="category" type="string">
  Filter by category
</ParamField>

<ParamField query="venue" type="string">
  Filter by venue
</ParamField>

<ParamField query="page" type="number">
  Page number (default: 1)
</ParamField>

<ParamField query="limit" type="number">
  Results per page (max: 100, default: 20)
</ParamField>

### Response

```json
{
  "ok": true,
  "data": [
    {
      "tradeId": "trade_123",
      "marketId": "BTC-15M-20250111-1430",
      "question": "Will BTC be above $100K?",
      "outcome": "YES",
      "outcomeId": 0,
      "action": "buy",
      "shares": 150.0,
      "price": 0.6543,
      "cost": 98.15,
      "fee": 0.10,
      "total": 98.25,
      "venue": "polymarket",
      "chain": "polygon",
      "txHash": "0xabc...",
      "timestamp": 1638360000000,
      "settlement": {
        "settled": true,
        "result": "YES",
        "payout": 150.00,
        "pnl": 51.75
      }
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 89,
    "pages": 5,
    "hasMore": true
  }
}
```

<ResponseField name="settlement" type="object | null">
  Settlement info if market resolved, null if still open
</ResponseField>

### Example

<CodeGroup>

```typescript TypeScript
const history = await api.get('/v1/portfolio/0x your_address/history', {
  params: { limit: 50, category: 'crypto' }
});

console.log(`Total trades: ${history.pagination.total}`);

history.data.forEach(trade => {
  console.log(`${trade.action.toUpperCase()} ${trade.shares} ${trade.outcome}`);
  console.log(`  @ $${trade.price} on ${trade.venue}`);
  if (trade.settlement) {
    console.log(`  Settled: ${trade.settlement.result} â†’ P&L: $${trade.settlement.pnl}`);
  }
});
```

```python Python
response = requests.get(
    'https://api.predifi.com/v1/portfolio/0x your_address/history',
    headers={'Authorization': f'Bearer {api_key}'},
    params={'limit': 50}
)

for trade in response.json()['data']:
    print(f"{trade['action'].upper()} {trade['shares']} {trade['outcome']}")
    if trade['settlement']:
        print(f"  P&L: ${trade['settlement']['pnl']}")
```

</CodeGroup>

---

## Rate Limits

| Endpoint | Rate Limit |
|----------|------------|
| `GET /v1/portfolio/:address/balances` | 30 req/min |
| `GET /v1/portfolio/:address/positions` | 30 req/min |
| `GET /v1/portfolio/:address/pnl` | 20 req/min |
| `GET /v1/portfolio/:address/history` | 30 req/min |

<Tip>
  Use WebSocket `portfolio` channel for real-time balance and position updates.
</Tip>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Trading API" icon="cart-shopping" href="/api-reference/trading">
    Place trades to build positions
  </Card>
  <Card title="Markets API" icon="chart-line" href="/api-reference/markets">
    Browse available markets
  </Card>
  <Card title="WebSocket API" icon="bolt" href="/api-reference/websockets">
    Real-time portfolio updates
  </Card>
  <Card title="Orderbook API" icon="book" href="/api-reference/orderbook">
    Check market liquidity
  </Card>
</CardGroup>

<!-- validation-check -->
